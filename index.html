<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard - Serveur</title>
    <link rel="stylesheet" href="styles.css"> <!-- Lien vers ton fichier CSS -->
</head>
<body>
    <!-- Bannière avec texte -->
    <header>
        <div id="banner">
            <h1>L'AS de Trèfle</h1> <!-- Le texte de la bannière -->
        </div>
    </header>

    <!-- Menu déroulant -->
    <h2>Choisissez un serveur</h2>
    <select id="server-select">
        <option value="Tiliwan1">Tiliwan 1</option>
        <option value="Tiliwan2">Tiliwan 2</option>
        <option value="Oshimo">Oshimo</option>
        <option value="Herdegrize">Herdegrize</option>
        <option value="Euro">Euro</option>
    </select>

    <!-- Tableau pour afficher les données -->
    <table id="leaderboard">
        <thead>
            <tr>
                <th>Nom d'utilisateur</th>
                <th>Gains Totaux</th>
                <th>Pertes Totales</th>
                <th>Mises Totales</th>
                <th>Participation</th>
            </tr>
        </thead>
        <tbody id="leaderboard-body">
            <!-- Les lignes de données seront insérées ici par JavaScript -->
        </tbody>
    </table>

    <!-- Inclure Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-database.js"></script>

    <script>
        // Configurer Firebase
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://leaderboard-ef986-default-rtdb.europe-west1.firebasedatabase.app",  // L'URL de ta base de données
            projectId: "leaderboard-ef986",
            storageBucket: "leaderboard-ef986.firebasestorage.app",
            messagingSenderId: "524253229167",
            appId: "1:524253229167:web:a3bb0f032d08e7676a9d9a",
        };

        // Initialiser Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database(app);

        // Fonction pour récupérer et afficher les données
        function loadLeaderboardData(server) {
            const leaderboardRef = db.ref(`leaderboard/${server}`);

            leaderboardRef.once('value', (snapshot) => {
                const data = snapshot.val();
                const tbody = document.getElementById('leaderboard-body');
                tbody.innerHTML = '';  // Vider les lignes existantes

                // Vérifie si des données existent avant de les afficher
                if (data && data.utilisateurs) {
                    for (const userId in data.utilisateurs) {
                        const user = data.utilisateurs[userId];
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${user.username}</td>
                            <td>${user.total_wins} jetons</td>
                            <td>${user.total_losses} jetons</td>
                            <td>${user.total_bets} jetons</td>
                            <td>${user.participation}</td>
                        `;
                        tbody.appendChild(row);
                    }
                } else {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td colspan="5">Aucune donnée disponible</td>`;
                    tbody.appendChild(row);
                }
            });
        }

        // Charger les données pour le serveur par défaut au démarrage
        loadLeaderboardData('Tiliwan1');

        // Écouter le changement de sélection dans le menu déroulant
        document.getElementById('server-select').addEventListener('change', function(event) {
            const selectedServer = event.target.value;
            loadLeaderboardData(selectedServer);  // Charger les données du serveur sélectionné
        });
    </script>
</body>
</html>
